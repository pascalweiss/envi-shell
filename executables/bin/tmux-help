#!/usr/bin/env bash

# Check for layout parameter (1 = single column, 2 = bordered layout, default = auto)
LAYOUT="${1:-auto}"

# Auto-detect layout based on terminal width if no parameter given
if [ "$LAYOUT" = "auto" ]; then
    TERMINAL_WIDTH=$(tput cols 2>/dev/null || echo 80)
    if [ "$TERMINAL_WIDTH" -ge 86 ]; then
        LAYOUT="2"  # Use bordered layout
    else
        LAYOUT="1"  # Use single column layout
    fi
fi

if [ "$LAYOUT" = "1" ]; then
    # Single column layout
    echo "ğŸ“‹ TMUX COMMANDS"
    echo ""
    echo "Essential Commands:"
    echo "  - Ctrl+b d  - Detach from session"
    echo "  - tt        - Session manager (fzf)"
    echo ""
    echo "More Help:"
    echo "  - Ctrl+b ?  - Show all key bindings"
    echo "  - Ctrl+b [  - Copy mode (scroll)"
    echo ""
    echo "Pane Management:"
    echo "  - Ctrl+b %    - Split vertically"
    echo "  - Ctrl+b \"    - Split horizontally"
    echo "  - Ctrl+b â†â†‘â†“â†’ - Navigate panes"
    echo "  - Ctrl+b o    - Switch to next pane"
    echo "  - Ctrl+b x    - Kill current pane"
    echo "  - Ctrl+b z    - Toggle pane zoom"
    echo ""
    echo "Pane Resizing:"
    echo "  - Ctrl+b Ctrl+â†â†‘â†“â†’ - Resize pane"
    echo "  - Ctrl+b Alt+â†â†‘â†“â†’  - Resize by 5 steps"
    echo ""
    echo "Layout Controls:"
    echo "  - Ctrl+b Space - Cycle through layouts"
    echo ""
elif [ "$LAYOUT" = "2" ]; then
    # Bordered layout (original)
    echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
    echo "â”‚                                  ğŸ“‹ TMUX COMMANDS                                 â”‚"
    echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
    echo "â”‚ Essential Commands:                 â”‚ Pane Management:                            â”‚"
    echo "â”‚   Ctrl+b d  - Detach from session   â”‚   Ctrl+b %    - Split vertically            â”‚"
    echo "â”‚   tt        - Session manager (fzf) â”‚   Ctrl+b \"    - Split horizontally          â”‚"
    echo "â”‚                                     â”‚   Ctrl+b â†â†‘â†“â†’ - Navigate panes              â”‚"
    echo "â”‚ More Help:                          â”‚   Ctrl+b o    - Switch to next pane         â”‚"
    echo "â”‚   Ctrl+b ?  - Show all key bindings â”‚   Ctrl+b x    - Kill current pane           â”‚"
    echo "â”‚   Ctrl+b [  - Copy mode (scroll)    â”‚   Ctrl+b z    - Toggle pane zoom            â”‚"
    echo "â”‚                                     â”‚                                             â”‚"
    echo "â”‚                                     â”‚ Pane Resizing:                              â”‚"
    echo "â”‚                                     â”‚   Ctrl+b Ctrl+â†â†‘â†“â†’ - Resize pane            â”‚"
    echo "â”‚                                     â”‚   Ctrl+b Alt+â†â†‘â†“â†’  - Resize by 5 steps      â”‚"
    echo "â”‚                                     â”‚                                             â”‚"
    echo "â”‚                                     â”‚ Layout Controls:                            â”‚"
    echo "â”‚                                     â”‚   Ctrl+b Space - Cycle through layouts      â”‚"
    echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
    echo ""
else
    echo "Usage: tmux-help [1|2]"
    echo "  1 - Single column layout"
    echo "  2 - Bordered layout"
    echo "  (no param) - Auto-detect based on terminal width"
    exit 1
fi
